<!DOCTYPE html>
<html lang="cn">
<head>
    <meta charset="UTF-8">
    <title>JS</title>
</head>
<body>
<h1>验证表单</h1>
<hr>
<form action="1.php" name="regForm" method="post" onsubmit="return checkFrom()">
    <table>
        <tr>
            <td>邮箱:</td>
            <td><input type="text" name="email" onblur="checkEmail()"></td>
            <td id="etab">* 必填项,请输入常用邮箱</td>
        </tr>
        <tr>
            <td>用户名:</td>
            <td><input type="text" name="user" onblur="checkUser()"></td>
            <td id="utab"> * 必填项,请输入用户名(6-12位,数字字母下划线组成)</td>
        </tr>
        <tr>
            <td>密码:</td>
            <td><input type="password" name="pass" onblur="checkPass()"></td>
            <td id="ptab">* 必填项,请输入6-12位的密码</td>
        </tr>
        <tr>
            <td>确认密码:</td>
            <td><input type="password" name="repass" onblur="checkRepass()"></td>
            <td id="rptab">* 必填项,请再一次输入密码</td>
        </tr>
        <tr>
            <td></td>
            <td><input type="submit" value="注 册"></td>
        </tr>
    </table>
</form>

<script>
    //        定义验证邮箱的函数
    function checkEmail() {
        var email = document.regForm.email.value;
        var etab = document.getElementById('etab');
//            console.log(email);
        if (email.match(/^[\w-]+@[\w-]+(\.\w+){1,3}$/) == null) {
//                匹配失败
            etab.innerHTML = '* 邮箱格式不正确!';
            etab.style.color = '#f00';
            return false;
        } else {
            etab.innerHTML = '* √通过验证!';
            etab.style.color = '#0a0';
            return true;
        }
    }

    //        定义验证用户名的函数
    function checkUser() {
        var user = document.regForm.user.value;
        var utab = document.getElementById('utab');
        if (user.match(/^\w{6,12}$/) == null) {
//                匹配失败
            utab.innerHTML = '* 用户名必须由6-12位数字字母下划线组成';
            utab.style.color = '#f00';
            return false;
        } else {
            utab.innerHTML = '* √通过验证!';
            utab.style.color = '#0a0';
            return true;
        }
    }

    //        定义验证密码的函数
    function checkPass() {
        var pass = document.regForm.pass.value;
        var ptab = document.getElementById('ptab');
        if (pass.length < 6 || pass.length > 18) {
//                匹配失败
            ptab.innerHTML = '* 密码不合法,必须由6-18位组成';
            ptab.style.color = '#f00';
            return false;
        } else {
            ptab.innerHTML = '* √通过验证!';
            ptab.style.color = '#0a0';
            return true;
        }
    }

    //        定义验证二次密码的函数
    function checkRepass() {
        var pass = document.regForm.pass.value;
        var repass = document.regForm.repass.value;
        var rptab = document.getElementById('rptab');
        if (pass != repass) {
//                匹配失败
            rptab.innerHTML = '* 两次密码不一致!';
            rptab.style.color = '#f00';
            return false;
        } else {
            rptab.innerHTML = '* √通过验证!';
            rptab.style.color = '#0a0';
            return true;
        }
    }

    //        提交验证结果
    function checkFrom() {
        return checkEmail() && checkUser() &&　checkPass() && checkRepass();
    }
</script>
</body>
</html>